<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Print Sticker</title>
<style>
  @page { 
    size: 3in 1in; 
    margin: 0; 
  }
  html, body { 
    width: 3in; 
    height: 1in; 
    margin: 0; 
    padding: 0; 
  }

  .label {
    width: 3in; 
    height: 1in; 
    display: grid;
    grid-template-rows: 0.15in 0.18in 0.13in 0.45in;
    grid-template-columns: 3in;
    font-family: Arial, Helvetica, sans-serif;
    border: 1px solid #000;
    box-sizing: border-box;
  }
  
  .row {
    display: flex; 
    align-items: center; 
    justify-content: center;
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis;
    line-height: 1;
    padding: 0 5px;
  }
  
  .title { 
    font-size: 9pt; 
    font-weight: 700; 
  }
  
  .sku { 
    font-size: 21pt; 
    font-weight: 800; 
  }
  
  .cond { 
    font-size: 13pt; 
    font-weight: 600; 
  }
  
  .barcode svg {
    width: 92%;
    height: 90%;
  }
</style>
</head>
<body>
  <div class="label">
    <div class="row title" id="title"></div>
    <div class="row sku" id="sku"></div>
    <div class="row cond" id="condition"></div>
    <div class="row barcode">
      <svg id="barcode"></svg>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
  <script>
    // Get parameters from URL
    const urlParams = new URLSearchParams(window.location.search);
    
    // Set values from URL parameters
    document.getElementById('title').textContent = urlParams.get('title') || '';
    document.getElementById('sku').textContent = 'SKU: ' + (urlParams.get('sku') || '');
    document.getElementById('condition').textContent = 
      (urlParams.get('condition') || '') + ' | ' + (urlParams.get('detail') || '');

    // Generate barcode
    const sku = urlParams.get('sku');
    if (sku) {
      JsBarcode("#barcode", sku, {
        format: "CODE128",
        displayValue: false,
        lineColor: "#000",
        width: 2,
        height: 32,
        margin: 0
      });
    }

    // Auto-print and close
    setTimeout(() => {
      window.print();
    }, 500);

    window.onafterprint = function() {
      setTimeout(() => {
        window.close();
      }, 100);
    };
  </script>
</body>
</html>